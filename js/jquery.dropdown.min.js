/*!
 * jQuery DropDown
 * Copyright (c) 2013 CreativeDream
 * Website: http://creativedream.net/plugins
 * Version: 1.2 (04-11-2013)
 * Requires: jQuery v1.7.1 or later
 */
(function(e){e.fn.dropdown=function(n){var r=e.extend({},e.fn.dropdown.defaults,n);return this.each(function(n,i){var s,o=e(i),u,a="#dropdown",f={init:function(){s=this;u=e("<div id='dropdown' />").hide();u.on("click","ul li a",function(t){s._dropButton(e(this))}).on("click",function(e){e.stopPropagation()});s._hideDrop();s._showDrop();s._dropContent();s._dropPosition()},_showDrop:function(){e("body").append(u)},_hideDrop:function(){e(a).remove()},_dropContent:function(){if(r.buttons.length==0&&!e.isArray(r.buttons)){s._hideDrop();return false}var n="<ul>";e.each(r.buttons,function(i,s){if(e.isEmptyObject(this)){n+='<li class="divider"></li>'}else{t=typeof r.template=="function"?r.template({id:i,text:s["text"],href:s["href"],addClass:s["addClass"]}):r.template;if(s["text"]){t=t.replace(new RegExp("%text%","g"),s["text"])}if(s["addClass"]){t=$(t).attr("class",s["addClass"]).get(0).outerHTML}if(s["href"]){t=$(t).find("a").attr("href",s["href"]).closest("li").get(0).outerHTML}n+=t}});n+="</ul>";u.append(n)},_dropPosition:function(){var t={wH:e(window).height()+e(window).scrollTop(),wW:e(window).width()+e(window).scrollLeft()},n={dH:u.outerHeight(),dW:u.outerWidth()},r={bTop:o.offset().top,bLeft:o.offset().left,bH:o.outerHeight(),bW:o.outerWidth()},i=r.bTop+r.bH+2,s=r.bLeft-(n.dW-r.bW);u.css({top:i+"px",left:s+"px"});if(s<0){u.css("left",r.bLeft).addClass("arrow-left")}if(i+n.dH>t.wH){i=r.bTop-n.dH-r.bH-2;u.css("top",i+"px").addClass("arrow-down")}if(s+n.dW==t.wW){s=s-8;u.css("left",s)}u.show()},_dropButton:function(t){var n=false,i=u.find("ul li a").index(t),a=e.grep(r.buttons,function(t){return!e.isEmptyObject(t)})[i];if(a.onClick&&typeof a.onClick=="function"){if(a.onClick(o,t)){s._hideDrop()}}else{s._hideDrop()}},_disable:function(){f.disabled=true},_enable:function(){f.disabled=false},disabled:false};o.on("click",function(e){if($(a).length>0){f._hideDrop()}else{if(!f.disabled){f.init()}}e.preventDefault()});o.on("dropdown.disable",f._disable);o.on("dropdown.enable",f._enable);e(this).click(function(e){e.stopPropagation()});e("html").click(function(){f._hideDrop()});e(window).bind("contextmenu",function(){f._hideDrop()}).bind("blur",function(){f._hideDrop()}).bind("resize",function(){f._hideDrop()}).bind("scroll",function(){f._hideDrop()});return o})};e.fn.dropdown.defaults={template:function(e){return"<li><a>"+e.text+"</a></li>"},buttons:[{text:"Button",href:"",addClass:"",onClick:function(e,t){console.log(e);console.log(t);return true}},{}]}})(jQuery)